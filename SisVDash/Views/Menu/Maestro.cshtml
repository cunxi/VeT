@using System.Data;

<style>
    .btn11 {
        background-color: #148F40;
        border: none;
        color: white;
        padding: 6px 11px;
        font-size: 11px;
        cursor: pointer;
    }

        .btn11:hover {
            background-color: #1ED760;
        }
</style>
<style>
    .btn22 {
        background-color: #007072;
        border: none;
        color: white;
        padding: 6px 11px;
        font-size: 11px;
        cursor: pointer;
    }

        .btn22:hover {
            background-color: #01A9AC;
        }
</style>
<style>
    .btn33 {
        background-color: #A93E4A;
        border: none;
        color: white;
        padding: 6px 11px;
        font-size: 11px;
        cursor: pointer;
    }

        .btn33:hover {
            background-color: #FE5D70;
        }
</style>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
<style>
    .form-control-feedback {
        position: absolute;
        padding: 10px;
        pointer-events: none;
    }

    .form-control {
        padding-left: 30px !important;
    }
</style>
<style>
    .validation {
        border: 2px solid #FF6060;
        /*background-color: #FFEBEE;*/
        display: block;
        width: 100%;
        padding: .5rem .75rem;
        font-size: 1rem;
        line-height: 1.25;  
        color: #495057;
        background-image: none;
        background-clip: padding-box;
        border-radius: .25rem;
        transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
        font-size: 14px;
        padding-left: 30px;
    }
</style>
<style>
    .thumb {
        height: 300px;
        border: 1px solid #000;
        margin: 10px 5px 0 0;
    }
</style>

<link rel="icon" href="~/Content/assets/images/favicon.ico" type="image/x-icon">
<!-- Google font--><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,800" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="~/Content/bower_components/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="~/Content/assets/icon/themify-icons/themify-icons.css">
<link rel="stylesheet" type="text/css" href="~/Content/assets/icon/icofont/css/icofont.css">
<link rel="stylesheet" type="text/css" href="~/Content/bower_components/pnotify/css/pnotify.css">
<link rel="stylesheet" type="text/css" href="~/Content/bower_components/pnotify/css/pnotify.brighttheme.css">
<link rel="stylesheet" type="text/css" href="~/Content/bower_components/pnotify/css/pnotify.buttons.css">
<link rel="stylesheet" type="text/css" href="~/Content/assets/pages/pnotify/notify.css">
<link rel="stylesheet" type="text/css" href="~/Content/assets/css/style.css">









<link href="~/Content/Ultima/css/fileinput.css" media="all" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" crossorigin="anonymous">
<link href="~/Content/Ultima/themes/explorer-fas/theme.css" media="all" rel="stylesheet" type="text/css" />
<script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>


<body>
    <div class="col-sm-12">
        <div class="page-body toolbar-page">
            <div class="card-header" style="color:#fff;background-image: linear-gradient(to right, rgba(98,125,77,1) 0%, rgba(85,123,82,1) 13%, rgba(0,112,114,1) 100%);">
                <h6 class="my-1">Mantenedor de @ViewBag.Nombre <i style="color:#fff;" tabindex="0"></i></h6>

            </div>
            <div class="card">
                <div class="card-block">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="d-flex flex-wrap" id="inventario_header">

                                    @if (@ViewBag.Nombre == "color")
                                    {
                                        <button class="btn btn-primary btn-outline-primary" id="btnAddColor" onclick="OpenModMan('COL|I|0~0')" data-toggle="tooltip" data-placement="top" title="Agregar @ViewBag.Nombre"><i class="icofont icofont-ui-add"></i>Agregar @ViewBag.Nombre</button>
                                    }
                                    else if (@ViewBag.Nombre == "especie")
                                    {
                                        <button class="btn btn-primary btn-outline-primary" id="btnAddEspecie" onclick="OpenModMan('ESP|I|0~0')" data-toggle="tooltip" data-placement="top" title="Agregar @ViewBag.Nombre"><i class="icofont icofont-ui-add"></i>Agregar @ViewBag.Nombre</button>
                                    }
                                    else if (@ViewBag.Nombre == "patron")
                                    {
                                        <button class="btn btn-primary btn-outline-primary" id="btnAddEspecie" onclick="OpenModMan('PAT|I|0~0')" data-toggle="tooltip" data-placement="top" title="Agregar @ViewBag.Nombre"><i class="icofont icofont-ui-add"></i>Agregar @ViewBag.Nombre</button>
                                    }

                                    else if (@ViewBag.Nombre == "raza")
                                    {
                                        <button class="btn btn-primary btn-outline-primary" id="btnAddEspecie" onclick="OpenModMan('RAZ|I|0~0~0')" data-toggle="tooltip" data-placement="top" title="Agregar @ViewBag.Nombre"><i class="icofont icofont-ui-add"></i>Agregar @ViewBag.Nombre</button>
                                    }
                                    else if (@ViewBag.Nombre == "empresa")
                                    {
                                        <button class="btn btn-primary btn-outline-primary" id="btnAddEspecie" onclick="OpenModMan('EMP|I|0~0~0')" data-toggle="tooltip" data-placement="top" title="Agregar @ViewBag.Nombre"><i class="icofont icofont-ui-add"></i>Agregar @ViewBag.Nombre</button>
                                    }
                                    else if (@ViewBag.Nombre == "centro")
                                    {
                                        <button class="btn btn-primary btn-outline-primary" id="btnAddEspecie" onclick="OpenModMan('CEN|I|0~0~0')" data-toggle="tooltip" data-placement="top" title="Agregar @ViewBag.Nombre"><i class="icofont icofont-ui-add"></i>Agregar @ViewBag.Nombre</button>
                                    }

                                    &nbsp;<button class="btn btn-primary btn-outline-primary" data-toggle="tooltip" data-placement="top" title="Exportar a Excel"><i class="icofont icofont-file-excel"></i>Xls</button>
                                    &nbsp;<button class="btn btn-primary btn-outline-primary" data-toggle="tooltip" data-placement="top" title="Exportar a Pdf"><i class="icofont icofont-file-pdf"></i>Pdf</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="dt-responsive table-responsive">
                            @if (@ViewBag.Nombre == "color")
                            {
                                <table id="simpletable" class="table">
                                    <thead>
                                        <tr>
                                            <th>Nombre</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (DataRow row in Model.Tables[0].Rows)
                                        {
                                            <tr id="@row["col_Codigo"]">
                                                <td>@row["col_Nombre"]</td>
                                                <td>
                                                    <button class="btn22" onclick="OpenModMan('COL|U|@row["col_Codigo"]~@row["col_Nombre"]')"><i class="icofont icofont-ui-edit"></i> Modificar</button>
                                                    <button class="btn33" onclick="Save('COL|D|@row["col_Codigo"]~@row["col_Nombre"]')"><i class="icofont icofont-ui-delete"></i> Eliminar</button>
                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <th>Nombre</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </tfoot>
                                </table>
                            }
                            @if (@ViewBag.Nombre == "especie")
                            {
                                <table id="simpletable" class="table">
                                    <thead>
                                        <tr>
                                            <th>Nombre</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (DataRow row in Model.Tables[0].Rows)
                                        {
                                            <tr id="@row["esp_Codigo"]">
                                                <td>@row["esp_Nombre"]</td>
                                                <td>
                                                    <button class="btn22" onclick="OpenModMan('ESP|U|@row["esp_Codigo"]~@row["esp_Nombre"]')"><i class="icofont icofont-ui-edit"></i> Modificar</button>
                                                    <button class="btn33" onclick="Save('ESP|D|@row["esp_Codigo"]~@row["esp_Nombre"]')"><i class="icofont icofont-ui-delete"></i> Eliminar</button>
                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <th>Nombre</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </tfoot>
                                </table>
                            }
                            @if (@ViewBag.Nombre == "patron")
                            {
                                <table id="simpletable" class="table">
                                    <thead>
                                        <tr>
                                            <th>Nombre</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (DataRow row in Model.Tables[0].Rows)
                                        {
                                            <tr id="@row["pat_Codigo"]">
                                                <td>@row["pat_Nombre"]</td>
                                                <td>
                                                    <button class="btn22" onclick="OpenModMan('PAT|U|@row["pat_Codigo"]~@row["pat_Nombre"]')"><i class="icofont icofont-ui-edit"></i> Modificar</button>
                                                    <button class="btn33" onclick="Save('PAT|D|@row["pat_Codigo"]~@row["pat_Nombre"]')"><i class="icofont icofont-ui-delete"></i> Eliminar</button>
                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <th>Nombre</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </tfoot>
                                </table>
                            }
                            @if (@ViewBag.Nombre == "raza")
                            {
                                <table id="simpletable" class="table">
                                    <thead>
                                        <tr>
                                            <th>Nombre</th>
                                            <th>Especie</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (DataRow row in Model.Tables[0].Rows)
                                        {
                                            <tr id="@row["raz_Codigo"]">
                                                <td>@row["raz_Nombre"]</td>
                                                <td>@row["esp_Nombre"]</td>
                                                <td>
                                                    <button class="btn22" onclick="OpenModMan('RAZ|U|@row["raz_Codigo"]~@row["raz_Nombre"]~@row["esp_Codigo"]')"><i class="icofont icofont-ui-edit"></i> Modificar</button>
                                                    <button class="btn33" onclick="Save('RAZ|D|@row["raz_Codigo"]~@row["raz_Nombre"]~@row["esp_Codigo"]')"><i class="icofont icofont-ui-delete"></i> Eliminar</button>
                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <th>Nombre</th>
                                            <th>Especie</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </tfoot>
                                </table>
                            }
                            @if (@ViewBag.Nombre == "empresa")
                            {
                                <table id="simpletable" class="table">
                                    <thead>
                                        <tr>
                                            <th>Rut</th>
                                            <th>Nombre</th>
                                            <th>Giro</th>
                                            <th>Dirección</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (DataRow row in Model.Tables[0].Rows)
                                        {
                                            <tr id="@row["emp_ID_empresa"]">
                                                <td>@row["emp_Rut"]-@row["emp_Dv"]</td>
                                                <td>@row["emp_RazonS"]</td>
                                                <td>@row["emp_Giro"]</td>
                                                <td>@row["emp_Direccion"]</td>

                                                <td>
                                                    <button class="btn11" onclick="OpenModMan('EMP|V|@row["emp_ID_empresa"]~@row["emp_Rut"]-@row["emp_Dv"]~@row["emp_RazonS"]~@row["emp_Giro"]~@row["emp_Direccion"]~@row["pai_Codigo"]~@row["reg_Codigo"]~@row["com_Codigo"]~@row["emp_Telefono"]~@row["emp_Email"]~@row["emp_RutRepreLegal"]-@row["emp_DvRepreLegal"]~@row["emp_RepreLegal"]')"><i class="icofont icofont-eye"></i> Detalle</button>
                                                    <button class="btn22" onclick="OpenModMan('EMP|U|@row["emp_ID_empresa"]~@row["emp_Rut"]-@row["emp_Dv"]~@row["emp_RazonS"]~@row["emp_Giro"]~@row["emp_Direccion"]~@row["pai_Codigo"]~@row["reg_Codigo"]~@row["com_Codigo"]~@row["emp_Telefono"]~@row["emp_Email"]~@row["emp_RutRepreLegal"]-@row["emp_DvRepreLegal"]~@row["emp_RepreLegal"]')"><i class="icofont icofont-ui-edit"></i> Modificar</button>
                                                    <button class="btn33" onclick="Save('EMP|D|@row["emp_ID_empresa"]~@row["emp_Rut"]-@row["emp_Dv"]~@row["emp_RazonS"]~@row["emp_Giro"]~@row["emp_Direccion"]~@row["pai_Codigo"]~@row["reg_Codigo"]~@row["com_Codigo"]~@row["emp_Telefono"]~@row["emp_Email"]~@row["emp_RutRepreLegal"]-@row["emp_DvRepreLegal"]~@row["emp_RepreLegal"]')"><i class="icofont icofont-ui-delete"></i> Eliminar</button>
                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <th>Rut</th>
                                            <th>Nombre</th>
                                            <th>Giro</th>
                                            <th>Dirección</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </tfoot>
                                </table>
                            }
                            @if (@ViewBag.Nombre == "centro")
                            {
                                <table id="simpletable" class="table">
                                    <thead>
                                        <tr>
                                            <th>Rut</th>
                                            <th>Nombre</th>
                                            <th>Giro</th>
                                            <th>Dirección</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (DataRow row in Model.Tables[0].Rows)
                                        {
                                            <tr id="@row["cen_ID_centro"]">
                                                <td>@row["cen_Rut"]-@row["cen_Dv"]</td>
                                                <td>@row["cen_RazonS"]</td>
                                                <td>@row["cen_Giro"]</td>
                                                <td>@row["cen_Direccion"]</td>

                                                <td>
                                                    <button class="btn11" onclick="OpenModMan('CEN|V|@row["cen_ID_Centro"]~@row["emp_ID_Empresa"]~@row["cen_Rut"]-@row["cen_Dv"]~@row["cen_RazonS"]~@row["cen_Giro"]~@row["cen_Direccion"]~@row["pai_Codigo"]~@row["reg_Codigo"]~@row["com_Codigo"]~@row["cen_Telefono"]~@row["cen_Email"]~@row["est_Cod_Est_Sec"]~@row["cen_RutContacto"]-@row["cen_DvContacto"]~@row["cen_Contacto"]')"><i class="icofont icofont-eye"></i> Detalle</button>
                                                    <button class="btn22" onclick="OpenModMan('CEN|U|@row["cen_ID_Centro"]~@row["emp_ID_Empresa"]~@row["cen_Rut"]-@row["cen_Dv"]~@row["cen_RazonS"]~@row["cen_Giro"]~@row["cen_Direccion"]~@row["pai_Codigo"]~@row["reg_Codigo"]~@row["com_Codigo"]~@row["cen_Telefono"]~@row["cen_Email"]~@row["est_Cod_Est_Sec"]~@row["cen_RutContacto"]-@row["cen_DvContacto"]~@row["cen_Contacto"]')"><i class="icofont icofont-ui-edit"></i> Modificar</button>
                                                    <button class="btn33" onclick="Save('CEN|D|@row["cen_ID_centro"]~@row["emp_ID_Empresa"]~@row["cen_Rut"]-@row["cen_Dv"]~@row["cen_RazonS"]~@row["cen_Giro"]~@row["cen_Direccion"]~@row["pai_Codigo"]~@row["reg_Codigo"]~@row["com_Codigo"]~@row["cen_Telefono"]~@row["cen_Email"]~@row["est_Cod_Est_Sec"]~@row["cen_RutContacto"]-@row["cen_DvContacto"]~@row["cen_Contacto"]')"><i class="icofont icofont-ui-delete"></i> Eliminar</button>
                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <th>Rut</th>
                                            <th>Nombre</th>
                                            <th>Giro</th>
                                            <th>Dirección</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </tfoot>
                                </table>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL COLOR -->
    <div class="modal fade" id="ModColor" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="TitulModColor">Mantenedor de Color</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group row">
                        <input name="codColor" id="codColor" maxlength="3" type="hidden" class="form-control" placeholder="Código color">
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Nombre *</label>
                        <div class="col-sm-10" style="height:30px">
                            <div class="form-group has-feedback">
                                <i class="fa fa-pencil form-control-feedback"></i>
                                <input data-toggle="validator" name="nomColor" id="nomColor" type="text" maxlength="50" class="form-control" placeholder="Nombre color" >
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default waves-effect " data-dismiss="modal">Cerrar</button>
                    <button type="button" id="btnUpdateCol" class="btn btn-primary waves-effect waves-light" onclick="Save('COL|U'+ '|' + document.getElementById('codColor').value + '~' + document.getElementById('nomColor').value)">Guardar</button>
                    <button type="button" id="btnGuardarCol" class="btn btn-primary waves-effect waves-light" onclick="Save('COL|I'+ '|' + '0' + '~' + document.getElementById('nomColor').value)">Guardar</button>
                </div>



            </div>
        </div>
    </div>
    <!-- MODAL ESPECIE -->
    <div class="modal fade" id="ModEspecie" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="TitulModEspecie">Mantenedor de Especie</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group row">
                        <input name="codEspecie" id="codEspecie" onkeypress="return check(event)" maxlength="3" type="hidden" class="form-control" placeholder="Código especie">
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Nombre *</label>
                        <div class="col-sm-10" style="height:30px">
                            <div class="form-group has-feedback">
                                <i class="fa fa-pencil form-control-feedback"></i>
                                <input name="nomEspecie" id="nomEspecie" type="text" maxlength="50" class="form-control" placeholder="Nombre especie">
                            </div>

                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default waves-effect " data-dismiss="modal">Cerrar</button>
                    <button type="button" id="btnUpdateEsp" class="btn btn-primary waves-effect waves-light" onclick="Save('ESP|U'+ '|' + document.getElementById('codEspecie').value + '~' + document.getElementById('nomEspecie').value)">Guardar</button>
                    <button type="button" id="btnGuardarEsp" class="btn btn-primary waves-effect waves-light" onclick="Save('ESP|I'+ '|' + document.getElementById('codEspecie').value + '~' + document.getElementById('nomEspecie').value)">Guardar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL PATRON -->
    <div class="modal fade" id="ModPatron" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="TitulModPatron">Mantenedor de Patron</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group row">
                        <input name="codPatron" id="codPatron" onkeypress="return check(event)" maxlength="3" type="hidden" class="form-control" placeholder="Código patrón">
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Nombre *</label>
                        <div class="col-sm-10" style="height:30px">
                            <div class="form-group has-feedback">
                                <i class="fa fa-pencil form-control-feedback"></i>
                                <input name="nomPatron" id="nomPatron" onkeypress="return check(this.value,'nomPatron')" type="text" maxlength="50" class="form-control" placeholder="Nombre patrón">
                            </div>

                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default waves-effect " data-dismiss="modal">Cerrar</button>
                    <button type="button" id="btnUpdatePat" class="btn btn-primary waves-effect waves-light" onclick="Save('PAT|U'+ '|' + document.getElementById('codPatron').value + '~' + document.getElementById('nomPatron').value)">Guardar</button>
                    <button type="button" id="btnGuardarPat" class="btn btn-primary waves-effect waves-light" onclick="Save('PAT|I'+ '|' + document.getElementById('codPatron').value + '~' + document.getElementById('nomPatron').value)">Guardar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL RAZA -->
    <div class="modal fade" id="ModRaza" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="TitulModRaza">Mantenedor de Raza</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group row">
                        <input name="codRaza" id="codRaza" onkeypress="return check(event)" maxlength="3" type="hidden" class="form-control" placeholder="Código raza">
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Nombre *</label>
                        <div class="col-sm-10" style="height:30px">
                            <div class="form-group has-feedback">
                                <i class="fa fa-pencil form-control-feedback"></i>
                                <input name="nomRaza" id="nomRaza" onkeypress="return check(this.value,'nomRaza')" type="text" maxlength="50" class="form-control" placeholder="Nombre raza">
                            </div>

                        </div>
                    </div>
                    <div class="form-group row">

                        <label class="col-sm-2 col-form-label">Especie *</label>
                        <div class="col-sm-10" style="height:30px">
                            <div class="form-group has-feedback">
                                <i class="fa fa-pencil-square form-control-feedback"></i>
                                @{ var CodEspecie = @ViewBag.codEspecie;}
                                @if (@ViewBag.Nombre == "raza")
                                {
                                    @Html.DropDownList("ddlraza", new SelectList(SisVDash.Models.DropDownList.ListaEspecies, "Value", "Text", CodEspecie), "Seleccione Especie", new

                               {
                                   @class = "select form-control custom-select",
                                   @onchange = "ddlEsp(this.value)"})

                                }
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default waves-effect " data-dismiss="modal">Cerrar</button>
                    <button type="button" id="btnUpdateRaz" class="btn btn-primary waves-effect waves-light" onclick="Save('RAZ|U'+ '|' + document.getElementById('codRaza').value + '~' + document.getElementById('nomRaza').value + '~' + document.getElementById('ddlraza').value)">Guardar</button>
                    <button type="button" id="btnGuardarRaz" class="btn btn-primary waves-effect waves-light" onclick="Save('RAZ|I'+ '|' + '0' + '~' + document.getElementById('nomRaza').value + '~' + document.getElementById('ddlraza').value)">Guardar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL EMPRESA -->
    <div class="modal fade" id="ModEmpresa" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="TitulModEmpresa">Mantenedor de Empresa</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <input name="IdEmpresa" id="IdEmpresa" onkeypress="return check(event)" maxlength="3" type="hidden" class="form-control" placeholder="Id Empresa">
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Rut *</label>
                        <div class="col-sm-10" style="height:30px">
                            <div class="form-group has-feedback">
                                <i class="fa fa-id-badge form-control-feedback"></i>
                                <input name="rutEmpresa" id="rutEmpresa"  oninput="checkRut(this)" type="text" maxlength="50" class="form-control" placeholder="Rut Empresa">
                            </div>

                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Razón social *</label>
                        <div class="col-sm-10" style="height:30px">
                            <div class="form-group has-feedback">
                                <i class="fa fa-id-card-o form-control-feedback"></i>
                                <input name="razonSocialEmpresa" id="razonSocialEmpresa" onkeypress="return check('razonSocialEmpresa')" type="text" maxlength="50" class="form-control" placeholder="Razón Social Empresa" required>
                            </div>

                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Giro *</label>
                        <div class="col-sm-10" style="height:30px">
                            <div class="form-group has-feedback">
                                <i class="fa fa-pencil form-control-feedback"></i>
                                <input name="GiroEmpresa" id="GiroEmpresa" onkeypress="return check(this.value,'GiroEmpresa')" type="text" maxlength="50" class="form-control" placeholder="Giro Empresa">
                            </div>

                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Dirección *</label>
                        <div class="col-sm-10" style="height:30px">
                            <div class="form-group has-feedback">
                                <i class="fa fa-address-book-o form-control-feedback"></i>
                                <input name="DireccionEmpresa" id="DireccionEmpresa" onkeypress="return check(this.value,'DireccionEmpresa')" type="text" maxlength="50" class="form-control" placeholder="Dirección Empresa">
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">País *</label>
                        <div class="col-sm-10" style="height:30px">
                            <div class="form-group has-feedback">
                                <i class="fa fa-flag form-control-feedback"></i>
                                @{ var pai_Codigo = @ViewBag.pai_Codigo;}
                                @if (@ViewBag.Nombre == "empresa")
                                {
                                    @Html.DropDownList("ddlPaisEmpresa", new SelectList(SisVDash.Models.DropDownList.ListaPaises, "Value", "Text", pai_Codigo), "Seleccione País", new

                               {
                                   @class = "select form-control custom-select" ,
                                   @onchange = "GetRegion(this.value,'Empresa')"})

                                }
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Región *</label>
                        <div class="col-sm-10" style="height:30px">
                            <div class="form-group has-feedback">
                                <i class="fa fa-location-arrow form-control-feedback"></i>
                                <select class="form-control custom-select" id="ddlRegionEmpresa" name="ddlRegionEmpresa" onchange="GetComuna(this.value,'Empresa')">
                                    <option value="" selected>Sin Region</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Comuna *</label>
                        <div class="col-sm-10" style="height:30px">
                            <div class="form-group has-feedback">
                                <i class="fa fa-map-pin form-control-feedback"></i>
                                <select class="form-control custom-select" id="ddlComunaEmpresa" name="ddlComunaEmpresa" onchange="ddlCom('ddlComunaEmpresa')">
                                    <option value="" selected>Sin Comuna</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Teléfono </label>
                        <div class="col-sm-4" style="height:30px">
                            <div class="form-group has-feedback">
                                <i class="fa fa-phone form-control-feedback"></i>
                                <input type="text" id="TelefonoEmp" name="TelefonoEmp" class="form-control" placeholder="Teléfono">
                            </div>

                        </div>
                        <label class="col-sm-2 col-form-label">E-mail</label>
                        <div class="col" style="height:30px">
                            <div class="form-group has-feedback">
                                <i class="fa fa-at form-control-feedback"></i>
                                <input type="email" id="Email" name="Email" class="form-control" placeholder="E-mail" onkeypress="return check(this.value,'Email')">
                            </div>


                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Rut Rep. legal </label>
                        <div class="col-sm-10" style="height:30px">
                            <div class="form-group has-feedback">
                                <i class="fa fa-id-badge form-control-feedback"></i>
                                <input name="RutRepLegal" id="RutRepLegal" required oninput="checkRut(this)" type="text" maxlength="50" class="form-control" placeholder="Rut representante legal">
                            </div>

                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Rep. legal </label>
                        <div class="col-sm-10" style="height:30px">
                            <div class="form-group has-feedback">
                                <i class="fa fa-user form-control-feedback"></i>
                                <input name="NomRepLegal" id="NomRepLegal" type="text" maxlength="50" class="form-control" placeholder="Nombre representante legal">
                            </div>

                        </div>
                    </div>


                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default waves-effect " data-dismiss="modal">Cerrar</button>
                    <button type="button" id="btnUpdateEmp" class="btn btn-primary waves-effect waves-light" onclick="Save('EMP|U|' + document.getElementById('IdEmpresa').value+ '~' + document.getElementById('rutEmpresa').value+ '~' + document.getElementById('razonSocialEmpresa').value+ '~' + document.getElementById('GiroEmpresa').value+ '~' + document.getElementById('DireccionEmpresa').value+ '~' + document.getElementById('ddlPaisEmpresa').value+ '~' + document.getElementById('ddlRegionEmpresa').value+ '~' + document.getElementById('ddlComunaEmpresa').value+ '~' + document.getElementById('TelefonoEmp').value+ '~' + document.getElementById('Email').value+ '~' + document.getElementById('RutRepLegal').value+ '~' + document.getElementById('NomRepLegal').value)">Guardar</button>
                    <button type="button" id="btnGuardarEmp" class="btn btn-primary waves-effect waves-light" onclick="Save('EMP|I|0'+ '~' +document.getElementById('rutEmpresa').value+ '~' + document.getElementById('razonSocialEmpresa').value+ '~' + document.getElementById('GiroEmpresa').value+ '~' + document.getElementById('DireccionEmpresa').value+ '~' + document.getElementById('ddlPaisEmpresa').value+ '~' + document.getElementById('ddlRegionEmpresa').value+ '~' + document.getElementById('ddlComunaEmpresa').value+ '~' + document.getElementById('TelefonoEmp').value+ '~' + document.getElementById('Email').value+ '~' + document.getElementById('RutRepLegal').value+ '~' + document.getElementById('NomRepLegal').value)">Guardar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL CENTRO -->
    <div class="modal fade" id="ModCentro" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="TitulModCentro">Mantenedor de centro</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <input name="IdCentro" id="IdCentro" type="hidden" class="form-control" placeholder="Id Centro">
                    <input name="estadoCentro" id="estadoCentro" maxlength="3" value="ACT" type="hidden" class="form-control" placeholder="Estado Centro">
                    <div class="col-lg-12">
                        <!-- Nav tabs -->
                        <ul class="nav nav-tabs md-tabs" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" data-toggle="tab" href="#DatCentro" role="tab">Datos centro</a>
                                <div class="slide"></div>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="tabLogo" data-toggle="tab" href="#Logo" role="tab">Logo Centro</a>
                                <div class="slide"></div>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="tabImg" data-toggle="tab" href="#Imagenes" role="tab">Imágenes</a>
                                <div class="slide"></div>
                            </li>

                        </ul>
                        <!-- Tab panes -->
                        <div class="tab-content card-block">
                            <div class="tab-pane active" id="DatCentro" role="tabpanel">
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label">Empresa *</label>
                                    <div class="col-sm-10" style="height:30px">
                                        <div class="form-group has-feedback">
                                            <i class="fa fa-pencil-square form-control-feedback"></i>
                                            @{ var emp_Codigo = @ViewBag.emp_Codigo;}
                                            @if (@ViewBag.Nombre == "centro")
                                            {
                                                @Html.DropDownList("ddlEmpresa", new SelectList(SisVDash.Models.DropDownList.ListaEmpresas, "Value", "Text", emp_Codigo), "Seleccione Empresa", new

                                           {
                                               @class = "select form-control custom-select",
                                               @onchange = "ddlEmpresa(this.value)"
                                           })

                                            }
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label">Rut centro *</label>
                                    <div class="col-sm-10" style="height:30px">
                                        <div class="form-group has-feedback">
                                            <i class="fa fa-id-badge form-control-feedback"></i>
                                            <input name="rutCentro" id="rutCentro" required oninput="checkRut(this)" type="text" maxlength="50" class="form-control" placeholder="Rut centro">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label">Nombre *</label>
                                    <div class="col-sm-10" style="height:30px">
                                        <div class="form-group has-feedback">
                                            <i class="fa fa-id-card-o form-control-feedback"></i>
                                            <input name="razonSocialCentro" id="razonSocialCentro" onkeypress="return check(this.value,'razonSocialCentro')" type="text" maxlength="50" class="form-control" placeholder="Nombre centro">
                                        </div>

                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label">Giro *</label>
                                    <div class="col-sm-10" style="height:30px">
                                        <div class="form-group has-feedback">
                                            <i class="fa fa-pencil form-control-feedback"></i>
                                            <input name="GiroCentro" id="GiroCentro" onkeypress="return check(this.value,'GiroCentro')" type="text" maxlength="50" class="form-control" placeholder="Giro centro">
                                        </div>

                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label">Dirección *</label>
                                    <div class="col-sm-10" style="height:30px">
                                        <div class="form-group has-feedback">
                                            <i class="fa fa-address-book-o form-control-feedback"></i>
                                            <input name="DireccionCentro" id="DireccionCentro" onkeypress="return check(this.value,'DireccionCentro')" type="text" maxlength="50" class="form-control" placeholder="Dirección centro">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label">País *</label>
                                    <div class="col-sm-10" style="height:30px">
                                        <div class="form-group has-feedback">
                                            <i class="fa fa-flag form-control-feedback"></i>
                                            @{ var pai_CodigoC = @ViewBag.pai_CodigoC;}
                                            @if (@ViewBag.Nombre == "centro")
                                            {
                                                @Html.DropDownList("ddlPaisCentro", new SelectList(SisVDash.Models.DropDownList.ListaPaises, "Value", "Text", pai_CodigoC), "Seleccione País", new

                                           {
                                               @class = "select form-control custom-select" ,
                                               @onchange = "GetRegion(this.value,'Centro')"})

                                            }
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label">Región *</label>
                                    <div class="col-sm-10" style="height:30px">
                                        <div class="form-group has-feedback">
                                            <i class="fa fa-location-arrow form-control-feedback"></i>
                                            <select class="form-control custom-select" id="ddlRegionCentro" name="ddlRegionCentro" onchange="GetComuna(this.value,'Centro')">
                                                <option value="" selected>Sin Region</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label">Comuna *</label>
                                    <div class="col-sm-10" style="height:30px">
                                        <div class="form-group has-feedback">
                                            <i class="fa fa-map-pin form-control-feedback"></i>
                                            <select class="form-control custom-select" id="ddlComunaCentro" name="ddlComunaCentro" onchange="ddlCom('Centro')">
                                                <option value="" selected>Sin Comuna</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label">Teléfono </label>
                                    <div class="col-sm-4" style="height:30px">
                                        <div class="form-group has-feedback">
                                            <i class="fa fa-phone form-control-feedback"></i>
                                            <input type="text" id="TelefonoCentro" name="TelefonoCentro" class="form-control" placeholder="Teléfono">
                                        </div>

                                    </div>
                                    <label class="col-sm-2 col-form-label">E-mail</label>
                                    <div class="col" style="height:30px">
                                        <div class="form-group has-feedback">
                                            <i class="fa fa-at form-control-feedback"></i>
                                            <input type="email" id="EmailCentro" name="EmailCentro" class="form-control" placeholder="E-mail">
                                        </div>


                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label">Rut contacto</label>
                                    <div class="col-sm-10" style="height:30px">
                                        <div class="form-group has-feedback">
                                            <i class="fa fa-id-badge form-control-feedback"></i>
                                            <input name="RutContacto" id="RutContacto" required oninput="checkRut(this)" type="text" maxlength="50" class="form-control" placeholder="Rut contacto">
                                        </div>

                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label">Contacto</label>
                                    <div class="col-sm-10" style="height:30px">
                                        <div class="form-group has-feedback">
                                            <i class="fa fa-user form-control-feedback"></i>
                                            <input name="NomContacto" id="NomContacto" onkeypress="return check(event)" type="text" maxlength="50" class="form-control" placeholder="Nombre contacto">
                                        </div>

                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label">Estado centro</label>
                                    <div class="col-sm-10" style="height:30px">
                                        <div class="form-group has-feedback">
                                            @if (@ViewBag.Nombre == "centro")
                                            {
                                                <div class="form-radio">
                                                    @foreach (var item in SisVDash.Models.RadioButtonList.ListaEstados)
                                                    {
                                                        <div class="radio radiofill radio-primary radio-inline">
                                                            <label>
                                                                <input type="radio" name="member" value="@item.Value" data-bv-field="member" onchange="Estado('@item.Value')">
                                                                <i class="helper"></i>@item.Text
                                                            </label>
                                                        </div>
                                                    }
                                                </div>
                                            }
                                        </div>

                                    </div>
                                </div>

                            </div>
                            <div class="tab-pane" id="Logo" role="tabpanel">
                                <div class="card">
                                  
                                </div>
                            </div>
                            <div class="tab-pane" id="Imagenes" role="tabpanel">
                                <div class="card">
                                    <form id="formImagenes" name="formImagenes" action="actionacrear" method="post" enctype="multipart/form-data">
                                        <div class="file-loading">
                                            <input id="filesImg" name="filesImg" class="file" type="file" multiple data-preview-file-type="any" data-upload-url="#" data-theme="fas">
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default waves-effect " data-dismiss="modal">Cerrar</button>
                    <button type="button" id="btnUpdateCen" class="btn btn-primary waves-effect waves-light" onclick="Save('CEN|U|' + document.getElementById('IdCentro').value + '~' + document.getElementById('ddlEmpresa').value + '~' + document.getElementById('rutCentro').value + '~' + document.getElementById('razonSocialCentro').value + '~' + document.getElementById('GiroCentro').value+ '~' + document.getElementById('DireccionCentro').value+ '~' + document.getElementById('ddlPaisCentro').value+ '~' + document.getElementById('ddlRegionCentro').value+ '~' + document.getElementById('ddlComunaCentro').value+ '~' + document.getElementById('TelefonoCentro').value+ '~' + document.getElementById('EmailCentro').value + '~' + document.getElementById('estadoCentro').value + '~' + document.getElementById('RutContacto').value+ '~' + document.getElementById('NomContacto').value)">Guardar</button>
                    <button type="button" id="btnGuardarCen" class="btn btn-primary waves-effect waves-light" onclick="Save('CEN|I|0'+ '~' + document.getElementById('ddlEmpresa').value + '~' + document.getElementById('rutCentro').value + '~' + document.getElementById('razonSocialCentro').value + '~' + document.getElementById('GiroCentro').value+ '~' + document.getElementById('DireccionCentro').value+ '~' + document.getElementById('ddlPaisCentro').value+ '~' + document.getElementById('ddlRegionCentro').value+ '~' + document.getElementById('ddlComunaCentro').value+ '~' + document.getElementById('TelefonoCentro').value+ '~' + document.getElementById('EmailCentro').value +  '~' + document.getElementById('estadoCentro').value + '~' + document.getElementById('RutContacto').value+ '~' + document.getElementById('NomContacto').value)">Guardar</button>                    
                </div>
            </div>



        </div>
    </div>
    <!-- SCRIPTS -->

    <script>
        function GuardaImg() {

            alert('asdasd');

        };
    </script>

    <!-- OPEN MODAL -->
    <script>
        function OpenModMan(dat) {

            var datInt;
            var valores = dat.split("|");
            var man = valores[0];
            var acc = valores[1];
            var Datos = valores[2];

            var cod;
            var nom;

            if (man == "COL") {
                //document.getElementById("nomColor").className = "form-control";
                document.getElementById("nomColor").required = false;
                datInt = Datos.split("~");
                cod = datInt[0];
                nom = datInt[1];

                if (acc == "I") {

                    $("#codColor").prop('disabled', false);
                    $('#TitulModColor').text("Ingresar color");
                    $('#codColor').val("");
                    $('#nomColor').val("");

                    document.getElementById("btnUpdateCol").style.display = "none";
                    document.getElementById("btnGuardarCol").style.display = "block";
                }
                else {
                    $("#codColor").prop('disabled', true);
                    $('#TitulModColor').text("Modificar color");
                    $('#codColor').val(cod);
                    $('#nomColor').val(nom);

                    document.getElementById("btnGuardarCol").style.display = "none";
                    document.getElementById("btnUpdateCol").style.display = "block";
                }
                $('#ModColor').modal('show');
            }
            if (man == "ESP") {
                //document.getElementById("nomEspecie").className = "form-control";
                document.getElementById("nomEspecie").required = false;

                datInt = Datos.split("~");
                cod = datInt[0];
                nom = datInt[1];

                if (acc == "I") {
                    $("#codEspecie").prop('disabled', false);
                    $('#TitulModEspecie').text("Ingresar especie");
                    $('#codEspecie').val("");
                    $('#nomEspecie').val("");
                    document.getElementById("btnUpdateEsp").style.display = "none";
                    document.getElementById("btnGuardarEsp").style.display = "block";
                }
                else {
                    $("#codEspecie").prop('disabled', true);
                    $('#TitulModEspecie').text("Modificar especie");
                    $('#codEspecie').val(cod);
                    $('#nomEspecie').val(nom);
                    document.getElementById("btnGuardarEsp").style.display = "none";
                    document.getElementById("btnUpdateEsp").style.display = "block";
                }

                $('#ModEspecie').modal('show');
            }
            if (man == "PAT") {
                //document.getElementById("nomPatron").className = "form-control";
                document.getElementById("nomPatron").required = false;
                datInt = Datos.split("~");
                cod = datInt[0];
                nom = datInt[1];

                if (acc == "I") {
                    $("#codPatron").prop('disabled', false);
                    $('#TitulModPatron').text("Ingresar patrón");
                    $('#codPatron').val("");
                    $('#nomPatron').val("");
                    document.getElementById("btnUpdatePat").style.display = "none";
                    document.getElementById("btnGuardarPat").style.display = "block";
                }
                else {
                    $("#codPatron").prop('disabled', true);
                    $('#TitulModPatron').text("Modificar patrón");
                    $('#codPatron').val(cod);
                    $('#nomPatron').val(nom);
                    document.getElementById("btnGuardarPat").style.display = "none";
                    document.getElementById("btnUpdatePat").style.display = "block";
                }

                $('#ModPatron').modal('show');
            }
            if (man == "RAZ") {
                //document.getElementById("nomRaza").className = "form-control";
                document.getElementById("ddlraza").className = "form-control";
                document.getElementById("nomRaza").required = false;
                document.getElementById("ddlraza").required = false;
                //$("#ddlraza").prop("required", false);
           

                datInt = Datos.split("~");
                cod = datInt[0];
                nom = datInt[1];
                var esp = datInt[2];

                if (acc == "I") {
                    $("#codRaza").prop('disabled', false);
                    $('#TitulModRaza').text("Ingresar raza");
                    $('#codRaza').val("");
                    $('#nomRaza').val("");
                    $('#ddlraza').val("");
                    document.getElementById("btnUpdateRaz").style.display = "none";
                    document.getElementById("btnGuardarRaz").style.display = "block";
                }
                else {
                    $("#codRaza").prop('disabled', true);
                    $('#TitulModRaza').text("Modificar raza");
                    $('#codRaza').val(cod);
                    $('#nomRaza').val(nom);
                    $('#ddlraza').val(esp);
                    document.getElementById("btnGuardarRaz").style.display = "none";
                    document.getElementById("btnUpdateRaz").style.display = "block";
                }

                $('#ModRaza').modal('show');
            }
            if (man == "EMP") {
                //document.getElementById("rutEmpresa").className = "form-control";
                document.getElementById("rutEmpresa").required = false;
                //document.getElementById("razonSocialEmpresa").className = "form-control";
                document.getElementById("razonSocialEmpresa").required = false;
                //document.getElementById("GiroEmpresa").className = "form-control";
                document.getElementById("GiroEmpresa").required = false;
                //document.getElementById("DireccionEmpresa").className = "form-control";
                document.getElementById("DireccionEmpresa").required = false;
                document.getElementById("ddlPaisEmpresa").className = "form-control";
                document.getElementById("ddlRegionEmpresa").className = "form-control";
                document.getElementById("ddlComunaEmpresa").className = "form-control";
                //document.getElementById("RutRepLegal").className = "form-control";
                document.getElementById("RutRepLegal").required = false;

                datInt = Datos.split("~");

                cod = datInt[0];
                nom = datInt[1];
                var esp = datInt[2];

                $("#rutEmpresa").prop('disabled', false);
                $("#IdEmpresa").prop('disabled', false);

                if (acc == "I") {

                    $("#rutEmpresa").prop('disabled', false);
                    $('#IdEmpresa').val("");
                    $('#rutEmpresa').val("");
                    $('#razonSocialEmpresa').val("");
                    $('#GiroEmpresa').val("");
                    $('#DireccionEmpresa').val("");
                    $('#ddlPaisEmpresa').val("");
                    $('#ddlRegionEmpresa').val("");
                    $('#ddlComunaEmpresa').val("");
                    $('#TelefonoEmp').val("");
                    $('#Email').val("");
                    $('#RutRepLegal').val("");
                    $('#NomRepLegal').val("");
                    $('#TitulModEmpresa').text("Ingresar empresa");
                    document.getElementById("btnUpdateEmp").style.display = "none";
                    document.getElementById("btnGuardarEmp").style.display = "block";

                    $("[id*='ddlRegion']").empty();
                    $("[id*='ddlComuna']").empty();
                }
                else {
                    var RutRepL = datInt[10].trim();
                    if (RutRepL == "-") {
                        RutRepL = ""
                    }

                    $('#IdEmpresa').val(datInt[0]);
                    $("#rutEmpresa").prop('disabled', true);
                    $('#rutEmpresa').val(datInt[1]);
                    $('#razonSocialEmpresa').val(datInt[2]);
                    $('#GiroEmpresa').val(datInt[3]);
                    $('#DireccionEmpresa').val(datInt[4]);
                    $('#ddlPaisEmpresa').val(datInt[5]);

                    GetRegion(datInt[5], 'Empresa');
                    GetComuna(datInt[6], 'Empresa');

                    setTimeout(function () { $('#ddlRegionEmpresa option[value="' + datInt[6].trim() + '"]').attr("selected", true); }, 300);
                    setTimeout(function () { $('#ddlComunaEmpresa option[value="' + datInt[7].trim() + '"]').attr("selected", true); }, 300);
                    $('#TelefonoEmp').val(datInt[8]);
                    $('#Email').val(datInt[9]);
                    $('#RutRepLegal').val(RutRepL);
                    $('#NomRepLegal').val(datInt[11]);

                    if (acc == "U") {
                        $('#TitulModEmpresa').text("Modificar empresa");
                        document.getElementById("btnUpdateEmp").style.display = "block";
                        document.getElementById("btnGuardarEmp").style.display = "none";
                    }
                    else {
                        $('#TitulModEmpresa').text("Detalle empresa");
                        document.getElementById("btnUpdateEmp").style.display = "none";
                        document.getElementById("btnGuardarEmp").style.display = "none";
                    }
                }

                $('#ModEmpresa').modal('show');
            }
            if (man == "CEN") {
                datInt = Datos.split("~");

                cod = datInt[0];
                nom = datInt[1];
                var esp = datInt[2];

                document.getElementById("ddlEmpresa").className = "form-control";
                //document.getElementById("rutCentro").className = "form-control";
                document.getElementById("rutCentro").required = false;
                //document.getElementById("IdCentro").className = "form-control";
                document.getElementById("IdCentro").required = false;
                //document.getElementById("rutCentro").className = "form-control";
                document.getElementById("rutCentro").required = false;
                //document.getElementById("razonSocialCentro").className = "form-control";
                document.getElementById("razonSocialCentro").required = false;
                //document.getElementById("GiroCentro").className = "form-control";
                document.getElementById("GiroCentro").required = false;
                //document.getElementById("DireccionCentro").className = "form-control";
                document.getElementById("DireccionCentro").required = false;
                document.getElementById("ddlPaisCentro").className = "form-control";
                document.getElementById("ddlRegionCentro").className = "form-control";
                document.getElementById("ddlComunaCentro").className = "form-control";
                //document.getElementById("TelefonoCentro").className = "form-control";
                document.getElementById("TelefonoCentro").required = false;
                //document.getElementById("EmailCentro").className = "form-control";
                document.getElementById("EmailCentro").required = false;
                //document.getElementById("RutContacto").className = "form-control";
                document.getElementById("RutContacto").required = false;
                //document.getElementById("NomContacto").className = "form-control";
                document.getElementById("NomContacto").required = false;


                if (acc == "I") {

                    setTimeout(function () { $('#ddlEmpresa option[value="' + datInt[1].trim() + '"]').attr("selected", true); }, 100);
                    //$("#member").prop("checked", true);

                    $("input[name=member][value='ACT']").prop("checked", true);

                    $('#estadoCentro').val("ACT");

                    $("#ddlEmpresa").prop('disabled', false);
                    $("#rutCentro").prop('disabled', false);
                    $("#ddlEmpresa").val("");
                    $('#IdCentro').val("");
                    $('#rutCentro').val("");
                    $('#razonSocialCentro').val("");
                    $('#GiroCentro').val("");
                    $('#DireccionCentro').val("");
                    $('#ddlPaisCentro').val("");
                    $('#ddlRegionCentro').val("");
                    $('#ddlComunaCentro').val("");
                    $('#TelefonoCentro').val("");
                    $('#EmailCentro').val("");
                    $('#RutContacto').val("");
                    $('#NomContacto').val("");
                    $('#TitulModCentro').text("Ingresar centro");
                    document.getElementById("btnUpdateCen").style.display = "none";
                    document.getElementById("btnGuardarCen").style.display = "block";
                }
                else {
                    var RutContacto = datInt[12].trim();
                    if (RutContacto.trim() == "-") {
                        RutContacto = ""
                    }


                    $("input[name=member][value=" + datInt[11].trim() + "]").prop("checked", true);

                    $("#ddlEmpresa").prop('disabled', true);
                    $("#rutCentro").prop('disabled', true);
                    $('#IdCentro').val(datInt[0]);
                    setTimeout(function () { $('#ddlEmpresa option[value="' + datInt[1].trim() + '"]').attr("selected", true); }, 100);

                    $('#rutCentro').val(datInt[2]);
                    $('#razonSocialCentro').val(datInt[3]);
                    $('#GiroCentro').val(datInt[4]);
                    $('#DireccionCentro').val(datInt[5]);

                    GetRegion(datInt[6], 'Centro');
                    GetComuna(datInt[7], 'Centro');

                    setTimeout(function () { $('#ddlPaisCentro option[value="' + datInt[6].trim() + '"]').attr("selected", true); }, 100);
                    setTimeout(function () { $('#ddlRegionCentro option[value="' + datInt[7].trim() + '"]').attr("selected", true); }, 100);
                    setTimeout(function () { $('#ddlComunaCentro option[value="' + datInt[8].trim() + '"]').attr("selected", true); }, 100);

                    $('#TelefonoCentro').val(datInt[9]);
                    $('#EmailCentro').val(datInt[10]);
                    $('#RutContacto').val(RutContacto);
                    $('#NomContacto').val(datInt[13]);

                    if (acc == "U") {
                        $('#TitulModCentro').text("Modificar centro");
                        document.getElementById("btnUpdateCen").style.display = "block";
                        document.getElementById("btnGuardarCen").style.display = "none";
                    }
                    else {
                        $('#TitulModCentro').text("Detalle centro");
                        document.getElementById("btnUpdateCen").style.display = "none";
                        document.getElementById("btnGuardarCen").style.display = "none";
                    }
                }

                $('#ModCentro').modal('show');
            }

        };
    </script>
    <!-- VALIDA, CONFIRMA Y GUARDA-->
    <script>
        function Save(data) {
            var recibido = data.split("|");
            var man = recibido[0];
            var acc = recibido[1];
            var dat = recibido[2];

            validaCampos(acc, man, dat, data)

        }
        alert(data);
        function validaCampos(acc, man, dat, data) {

            if (man == "COL") {

                var recibidoCol = dat.split("~");
                var codCol = recibidoCol[0];
                var nomCol = recibidoCol[1];
                if (nomCol == "") {


                    new PNotify({
                        title: 'Atención',
                        text: "Debe completar campos requeridos (*)",
                        icon: 'icofont icofont-info-square',
                        type: "error"
                    });
                    //document.getElementById("nomColor").className = "validation";
                    document.getElementById("nomColor").required = true;
                }
                else {

                    Confirmacion(acc, data)

                }
            }
            if (man == "ESP") {
                var recibidoEsp = dat.split("~");
                var codEsp = recibidoEsp[0];
                var nomEsp = recibidoEsp[1];
                if (nomEsp == "") {
                    new PNotify({
                        title: 'Atención',
                        text: "Debe completar campos requeridos (*)",
                        icon: 'icofont icofont-info-square',
                        type: "error"
                    });
                    //document.getElementById("nomEspecie").className = "validation";
                    document.getElementById("nomEspecie").required = true;
                }
                else {
                    Confirmacion(acc, data)
                }
            }
            if (man == "PAT") {
                var recibidoPat = dat.split("~");
                var codPat = recibidoPat[0];
                var nomPat = recibidoPat[1];
                if (nomPat == "") {
                    new PNotify({
                        title: 'Atención',
                        text: "Debe completar campos requeridos (*)",
                        icon: 'icofont icofont-info-square',
                        type: "error"
                    });
                    //document.getElementById("nomPatron").className = "validation";
                    document.getElementById("nomPatron").required = true;
                }
                else {
                    Confirmacion(acc, data)
                }
            }
            if (man == "RAZ") {
                RazValida = new Boolean(true);
                var recibidoRaz = dat.split("~");
                var codRaz = recibidoRaz[0];
                var nomRaz = recibidoRaz[1];
                var codEsp = recibidoRaz[2];
                var codEsp = codEsp + "nulo";
                var codEsp = codEsp.trim();


                if (nomRaz == "") {
                    //document.getElementById("nomRaza").className = "validation";
                    document.getElementById("nomRaza").required = true;
          
                    RazValida = false;
                }
                if (codEsp == "nulo") {
                
                  //$("#ddlraza").prop("required", true);
                    document.getElementById("ddlraza").className = "validation";
                    RazValida = false;
                }

                if (RazValida == false) {
                    new PNotify({
                        title: 'Atención',
                        text: "Debe completar campos requeridos (*)",
                        icon: 'icofont icofont-info-square',
                        type: "error"
                    });

                }
                else {
                    Confirmacion(acc, data)
                }
            }
            if (man == "EMP") {

                if (acc != "D") {
                    EmpValida = new Boolean(true);
                    EmpValida2 = new Boolean(true);

                    var recibidoEmp = dat.split("~");
                    var codEmp = recibidoEmp[0];
                    var RutEmp = recibidoEmp[1];
                    var razonEmp = recibidoEmp[2];
                    var GiroEmp = recibidoEmp[3];
                    var DirEmp = recibidoEmp[4];
                    var PaiEmp = recibidoEmp[5];
                    var RegEmp = recibidoEmp[6];
                    var ComEmp = recibidoEmp[7];

                    var PaiEmp = PaiEmp + "nulo";
                    var PaiEmp = PaiEmp.trim();
                    var RegEmp = RegEmp + "nulo";
                    var RegEmp = RegEmp.trim();
                    var ComEmp = ComEmp + "nulo";
                    var ComEmp = ComEmp.trim();

                    if (codEmp == "") {
                        //document.getElementById("IdEmpresa").className = "validation";
                        document.getElementById("IdEmpresa").required = true;
                        EmpValida = false;
                    }
                    if (RutEmp == "") {
                        //document.getElementById("rutEmpresa").className = "validation";
                        document.getElementById("rutEmpresa").required = true;
                        EmpValida = false;
                    }
                    if (razonEmp == "") {
                        //document.getElementById("razonSocialEmpresa").className = "validation";
                        document.getElementById("razonSocialEmpresa").required = true;
                        EmpValida = false;
                    }
                    if (GiroEmp == "") {
                        //document.getElementById("GiroEmpresa").className = "validation";
                        document.getElementById("GiroEmpresa").required = true;
                        EmpValida = false;
                    }
                    if (DirEmp == "") {
                        //document.getElementById("DireccionEmpresa").className = "validation";
                        document.getElementById("DireccionEmpresa").required = true;
                        EmpValida = false;
                    }
                    if (PaiEmp == "nulo") {
                        document.getElementById("ddlPaisEmpresa").className = "validation";
                        EmpValida = false;
                    }
                    if (RegEmp == "nulo") {
                        document.getElementById("ddlRegionEmpresa").className = "validation";
                        EmpValida = false;
                    }
                    if (ComEmp == "nulo") {
                        document.getElementById("ddlComunaEmpresa").className = "validation";
                        EmpValida = false;
                    }

                    if (EmpValida == false) {
                        new PNotify({
                            title: 'Atención',
                            text: "Debe completar campos requeridos (*)",
                            icon: 'icofont icofont-info-square',
                            type: "error"
                        });

                    }

                    //SI ESTAN TODOS LOS DATOS OBLIGATORIOS
                    else {

                        EmpValida2 = new Boolean(true);

                        if (Fn.validaRut($("#rutEmpresa").val())) {
                        } else {
                            document.getElementById("rutEmpresa").className = "validation";
                            EmpValida2 = false;
                            new PNotify({
                                title: 'Atención',
                                text: "Rut empresa inválido",
                                icon: 'icofont icofont-info-square',
                                type: "error"
                            });
                        }

                        if (EmpValida2 == true) {

                            var rutRepL = document.getElementById("RutRepLegal").value;

                            if (rutRepL == "" || rutRepL == "-") {

                            }
                            else {
                                if (Fn.validaRut($("#RutRepLegal").val())) {
                                } else {
                                    document.getElementById("RutRepLegal").className = "validation";
                                    EmpValida2 = false;
                                    new PNotify({
                                        title: 'Atención',
                                        text: "Rut Rep. Legal inválido",
                                        icon: 'icofont icofont-info-square',
                                        type: "error"
                                    });
                                }
                            }
                        }


                        if (EmpValida = true) {
                            var texto = document.getElementById("Email").value;
                            if (texto != "") {
                                var regex = /^[-\w.%+]{1,64}@@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i;

                                if (!regex.test(texto)) {
                                    EmpValida2 = false;
                                    document.getElementById("Email").className = "validation";
                                    new PNotify({
                                        title: 'Atención',
                                        text: "Correo inválido",
                                        icon: 'icofont icofont-info-square',
                                        type: "error"
                                    });

                                }
                            }
                        }

                        //VALIDACI0N
                        if (EmpValida2 == true) {
                            Confirmacion(acc, data);
                        }

                    }
                }
                //SI ES PARA ELIMINAR
                else {
                    Confirmacion(acc, data);
                }
            }
            if (man == "CEN") {

                if (acc != "D") {

                    EmpValida = new Boolean(true);
                    EmpValida2 = new Boolean(true);
                    var recibidoCen = dat.split("~");
                    var codCen = recibidoCen[0];
                    var codEmpCen = recibidoCen[1];
                    var RutCen = recibidoCen[2];
                    var razonCen = recibidoCen[3];
                    var GiroCen = recibidoCen[4];
                    var DirCen = recibidoCen[5];
                    var PaiCen = recibidoCen[6];
                    var RegCen = recibidoCen[7];
                    var ComCen = recibidoCen[8];

                    var PaiCen = PaiCen + "nulo";
                    var PaiCen = PaiCen.trim();
                    var RegCen = RegCen + "nulo";
                    var RegCen = RegCen.trim();
                    var ComCen = ComCen + "nulo";
                    var ComCen = ComCen.trim();

                    if (codEmpCen == "") {
                        document.getElementById("ddlEmpresa").className = "validation";                        
                        EmpValida = false;
                    }
                    if (RutCen == "") {
                        //document.getElementById("rutCentro").className = "validation";
                        document.getElementById("rutCentro").required = true;
                        EmpValida = false;
                    }
                    if (razonCen == "") {
                        //document.getElementById("razonSocialCentro").className = "validation";
                        document.getElementById("razonSocialCentro").required = true;
                        EmpValida = false;
                    }
                    if (GiroCen == "") {
                        //document.getElementById("GiroCentro").className = "validation";
                        document.getElementById("GiroCentro").required = true;
                        EmpValida = false;
                    }
                    if (DirCen == "") {
                        //document.getElementById("DireccionCentro").className = "validation";
                        document.getElementById("DireccionCentro").required = true;
                        EmpValida = false;
                    }
                    if (PaiCen == "nulo") {
                        document.getElementById("ddlPaisCentro").className = "validation";
                        EmpValida = false;
                    }
                    if (RegCen == "nulo") {
                        document.getElementById("ddlRegionCentro").className = "validation";
                        EmpValida = false;
                    }
                    if (ComCen == "nulo") {
                        document.getElementById("ddlComunaCentro").className = "validation";
                        EmpValida = false;
                    }

                    if (EmpValida == false) {
                        new PNotify({
                            title: 'Atención',
                            text: "Debe completar campos requeridos (*)",
                            icon: 'icofont icofont-info-square',
                            type: "error"
                        });

                    }

                    //SI ESTAN TODOS LOS DATOS OBLIGATORIOS
                    else {

                        EmpValida2 = new Boolean(true);

                        if (Fn.validaRut($("#rutCentro").val())) {
                        } else {
                            document.getElementById("rutCentro").className = "validation";
                            EmpValida2 = false;
                            new PNotify({
                                title: 'Atención',
                                text: "Rut centro inválido",
                                icon: 'icofont icofont-info-square',
                                type: "error"
                            });
                        }

                        if (EmpValida2 == true) {

                            var rutContacto = document.getElementById("RutContacto").value;

                            if (rutContacto == "" || rutContacto == "-") {

                            }
                            else {
                                if (Fn.validaRut($("#RutContacto").val())) {
                                } else {
                                    document.getElementById("RutContacto").className = "validation";
                                    EmpValida2 = false;
                                    new PNotify({
                                        title: 'Atención',
                                        text: "Rut contacto inválido",
                                        icon: 'icofont icofont-info-square',
                                        type: "error"
                                    });
                                }
                            }
                        }


                        if (EmpValida = true) {
                            var texto = document.getElementById("EmailCentro").value;
                            if (texto != "") {
                                var regex = /^[-\w.%+]{1,64}@@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i;

                                if (!regex.test(texto)) {
                                    EmpValida2 = false;
                                    document.getElementById("EmailCentro").className = "validation";
                                    new PNotify({
                                        title: 'Atención',
                                        text: "Correo inválido",
                                        icon: 'icofont icofont-info-square',
                                        type: "error"
                                    });

                                }
                            }
                        }

                        //VALIDACI0N
                        if (EmpValida2 == true) {
                            Confirmacion(acc, data);
                        }

                    }
                }
                //SI ES PARA ELIMINAR
                else {
                    Confirmacion(acc, data);
                }
            }
        }

        function Confirmacion(acc, data) {

            if (acc == "D") {
                var notice = new PNotify({
                    title: 'Confirmación',
                    text: '<p>Está seguro(a) de eliminar el registro?</p>',
                    hide: false,
                    type: 'warning',
                    confirm: {
                        confirm: true,
                        buttons: [
                            {
                                text: 'Si',
                                addClass: 'btn btn-sm btn-primary'
                            },
                            {
                                addClass: 'btn btn-sm btn-link'
                            }
                        ]
                    },
                    buttons: {
                        closer: false,
                        sticker: false
                    },
                    history: {
                        history: false
                    }
                })

                // Si es positivo
                notice.get().on('pnotify.confirm', function () {
                    Save2(data);
                })

                // Si es negativo
                notice.get().on('pnotify.cancel', function () {

                });
            }
            else {
                Save2(data);
            }
        }

        function Save2(data) {
            var recibido = data.split("|");
            var man = recibido[0];
            var acc = recibido[1];
            var dat = recibido[2];

            var a = "";
            var NombreModal = "";

            if (man == "COL") {
                NombreModal = "#ModColor"
                var datosInt = dat.split("~");
                var cod = datosInt[0];
                var nom = datosInt[1];
                a = data;
            }
            if (man == "ESP") {
                NombreModal = "#ModEspecie"
                var datosInt = dat.split("~");
                var cod = datosInt[0];
                var nom = datosInt[1];
                a = data;
            }
            if (man == "PAT") {
                NombreModal = "#ModPatron"
                var datosInt = dat.split("~");
                var cod = datosInt[0];
                var nom = datosInt[1];
                a = data;
            }
            if (man == "RAZ") {
                NombreModal = "#ModRaza"
                var datosInt = dat.split("~");
                var cod = datosInt[0];
                var nom = datosInt[1];
                var codRaz = datosInt[2];
                a = data;
            }
            if (man == "EMP") {
                NombreModal = "#ModEmpresa"
                var datosInt = dat.split("~");
                var cod = datosInt[0];
                var nom = datosInt[1];
                var codEmp = datosInt[2];
                a = data;
            }
            if (man == "CEN") {
                NombreModal = "#ModCentro"
                var datosInt = dat.split("~");
                var cod = datosInt[0];
                var nom = datosInt[1];
                var codCen = datosInt[2];
                a = data;
            }


            $.ajax({
                
                url: "/Menu/Accionar",
                data: { a: a },
                success: function (response) {
                    var tipoNotify = "info";
                    var dRespuesta = response.split("|");
                    var codigoRespuesta = dRespuesta[0];
                    var mensajeRespuesta = dRespuesta[1];
                    var CodigoMantenedor = dRespuesta[2];


                    var Arraycad = dat.split("~");
                    var dato1 = Arraycad[0];

                    dat = dat.replace(dato1, CodigoMantenedor);
                    cod = CodigoMantenedor;



                    var totalFiles = document.getElementById("filesImg").files.length;
                    if (totalFiles > 0) {            
                        alert('as');
                        $('#formImagenes').submit();
                    }



                    if (codigoRespuesta == "0") {

                        tipoNotify = "info";
                        $(NombreModal).modal('hide')

                        if (acc == "D") {
                            var drow = $('#simpletable').DataTable();
                            drow.row('#' + cod).remove().draw(!1);
                        }
                        if (acc == "I") {

                            var drow = $('#simpletable').DataTable();
                            if (man == "RAZ") {
                                drow.row.add([nom, dRespuesta[4], '<button class="btn22" onclick="OpenModMan(\'' + man + '|U|' + dat + '\')" ><i class=\"icofont icofont-ui-edit\"></i> Modificar</button>&nbsp;<button class="btn33" onclick="Save(\'' + man + '|D|' + dat + '\')" ><i class=\"icofont icofont-ui-delete\"></i> Eliminar</button>']).node().id = cod;
                                drow.draw();
                            }
                            else if (man == "EMP") {
                                drow.row.add([dRespuesta[3], dRespuesta[4], dRespuesta[5], dRespuesta[6], '<button class="btn11" onclick="OpenModMan(\'' + man + '|V|' + dat + '\')" ><i class=\"icofont icofont-eye\"></i> Detalle</button>&nbsp;<button class="btn22" onclick="OpenModMan(\'' + man + '|U|' + dat + '\')" ><i class=\"icofont icofont-ui-edit\"></i> Modificar</button>&nbsp;<button class="btn33" onclick="Save(\'' + man + '|D|' + dat + '\')" ><i class=\"icofont icofont-ui-delete\"></i> Eliminar</button>']).node().id = cod;
                                drow.draw();
                            }
                            else if (man == "CEN") {
                                var respCen = dat.split("~")
                                drow.row.add([respCen[2], respCen[3], respCen[4], respCen[5], '<button class="btn11" onclick="OpenModMan(\'' + man + '|V|' + dat + '\')" ><i class=\"icofont icofont-eye\"></i> Detalle</button>&nbsp;<button class="btn22" onclick="OpenModMan(\'' + man + '|U|' + dat + '\')" ><i class=\"icofont icofont-ui-edit\"></i> Modificar</button>&nbsp;<button class="btn33" onclick="Save(\'' + man + '|D|' + dat + '\')" ><i class=\"icofont icofont-ui-delete\"></i> Eliminar</button>']).node().id = cod;
                                drow.draw();
                            }
                            else {
                                drow.row.add([nom, '<button class="btn22" onclick="OpenModMan(\'' + man + '|U|' + dat + '\')" ><i class=\"icofont icofont-ui-edit\"></i> Modificar</button>&nbsp;<button class="btn33" onclick="Save(\'' + man + '|D|' + dat + '\')" ><i class=\"icofont icofont-ui-delete\"></i> Eliminar</button>']).node().id = cod;
                                drow.draw();
                            }
                        }
                        if (acc == "U") {
                            var drow = $('#simpletable').DataTable();

                            if (man == "RAZ") {

                                drow.row('#' + cod).remove().draw(!1);
                                drow.row.add([nom, dRespuesta[4], '<button class="btn22" onclick="OpenModMan(\'' + man + '|U|' + dat + '\')" ><i class=\"icofont icofont-ui-edit\"></i> Modificar</button>&nbsp;<button class="btn33" onclick="Save(\'' + man + '|D|' + dat + '\')" ><i class=\"icofont icofont-ui-delete\"></i> Eliminar</button>']).node().id = cod;
                                drow.draw();
                            }
                            else if (man == "EMP") {
                                drow.row('#' + cod).remove().draw(!1);
                                drow.row.add([dRespuesta[3], dRespuesta[4], dRespuesta[5], dRespuesta[6], '<button class="btn11" onclick="OpenModMan(\'' + man + '|V|' + dat + '\')" ><i class=\"icofont icofont-eye\"></i> Detalle</button>&nbsp;<button class="btn22" onclick="OpenModMan(\'' + man + '|U|' + dat + '\')" ><i class=\"icofont icofont-ui-edit\"></i> Modificar</button>&nbsp;<button class="btn33" onclick="Save(\'' + man + '|D|' + dat + '\')" ><i class=\"icofont icofont-ui-delete\"></i> Eliminar</button>']).node().id = cod;
                                drow.draw();
                            }
                            else if (man == "CEN") {

                                var respCen = dat.split("~")
                                drow.row('#' + cod).remove().draw(!1);
                                drow.row.add([respCen[2], respCen[3], respCen[4], respCen[5], '<button class="btn11" onclick="OpenModMan(\'' + man + '|V|' + dat + '\')" ><i class=\"icofont icofont-eye\"></i> Detalle</button>&nbsp;<button class="btn22" onclick="OpenModMan(\'' + man + '|U|' + dat + '\')" ><i class=\"icofont icofont-ui-edit\"></i> Modificar</button>&nbsp;<button class="btn33" onclick="Save(\'' + man + '|D|' + dat + '\')" ><i class=\"icofont icofont-ui-delete\"></i> Eliminar</button>']).node().id = cod;
                                drow.draw();
                            }
                            else {
                                drow.row('#' + cod).remove().draw(!1);
                                drow.row.add([nom, '<button class="btn22" onclick="OpenModMan(\'' + man + '|U|' + dat + '\')" ><i class=\"icofont icofont-ui-edit\"></i> Modificar</button>&nbsp;<button class="btn33" onclick="Save(\'' + man + '|D|' + dat + '\')" ><i class=\"icofont icofont-ui-delete\"></i> Eliminar</button>']).node().id = cod;
                                drow.draw();
                            }
                        }
                    }
                    else {
                        tipoNotify = "error";
                    }

                    new PNotify({
                        title: 'Información',
                        text: mensajeRespuesta,
                        icon: 'icofont icofont-info-square',
                        type: tipoNotify
                    });


                },
            });


        }

    </script>
    <!-- TOOLTIP-->
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <!-- SOLO NUMEROS Y LETRAS-->
    @*<script>
        function check(e, controlt) {
        
            var hola = controlt;


            //document.getElementById(hola).style.background = "#555555";
            document.getElementById(hola).className = "form-control";

            tecla = (document.all) ? e.keyCode : e.which;

            //Tecla de retroceso para borrar, siempre la permite
            if (tecla == 8) {
                return true;
            }

            // Patron de entrada, en este caso solo acepta numeros y letras
            patron = /[A-Za-z0-9-áéíóú--]/;
            tecla_final = String.fromCharCode(tecla);
            return patron.test(tecla_final);
        }
    </script>*@
    <!-- GET REGION-->
    <script type="text/javascript">

        function GetRegion(pai_Codigo, Tipo) {
            params = "pai_Codigo=" + pai_Codigo;

            $.ajax
                ({
                    data: params,
                    cache: true,
                    type: 'Post',
                    typeData: "json",
                    url: "GetRegion",
                    success: function (data) {
                        console.log(data);

                        if (data.length > 0) {

                            document.getElementById("ddlPais" + Tipo).className = "form-control";
                            document.getElementById("ddlRegion" + Tipo).innerHTML = "<option value='' >Seleccione región</option>";
                            for (var i = 0; i < data.length; i++) {
                                document.getElementById("ddlRegion" + Tipo).innerHTML += "<option value='" + data[i].reg_Codigo + "'>" + data[i].reg_Nombre + "</option>";
                            }

                        } else {


                            $("[id*=" + 'ddlRegion' + Tipo + "]").empty();
                            document.getElementById("ddlRegion" + Tipo).innerHTML = "<option value='' >Seleccione región</option>";
                            $("[id*=" + 'ddlComuna' + Tipo + "]").empty();
                            //$("[id*='ddlComuna']").empty();
                            document.getElementById("ddlComuna" + Tipo).innerHTML = "<option value=''>Seleccione comuna</option>";

                        }
                    }
                });

        }
    </script>
    <!-- GET COMUNA-->
    <script type="text/javascript">

        function GetComuna(reg_Codigo, Tipo) {
            params = "reg_Codigo=" + reg_Codigo;

            $.ajax
                ({
                    data: params,
                    cache: true,
                    type: 'Post',
                    typeData: "json",
                    url: "GetComuna",
                    success: function (data) {
                        console.log(data);
                        if (data.length > 0) {
                            document.getElementById("ddlRegion" + Tipo).className = "form-control";
                            document.getElementById("ddlComuna" + Tipo).innerHTML = "<option value='' >Seleccione comuna</option>";
                            for (var i = 0; i < data.length; i++) {
                                document.getElementById("ddlComuna" + Tipo).innerHTML += "<option value='" + data[i].com_Codigo + "'>" + data[i].com_Nombre + "</option>";
                            }
                        }
                        else {

                            $("[id*=" + 'ddlComuna' + Tipo + "]").empty();
                            document.getElementById("ddlComuna" + Tipo).innerHTML = "<option value='' >Seleccione comuna</option>";
                        }
                    }
                });

        }

    </script>
    <!-- GET ONCHANGE-->
    <script>
        function ddlEsp(dato) {
            document.getElementById("ddlraza").className = "form-control";
        }
        function ddlCom(dato) {
            document.getElementById(dato).className = "form-control";
        }
        function ddlEmpresa(dato) {


            if (dato != "") {
                document.getElementById("ddlEmpresa").className = "form-control";
                params = "emp_Codigo=" + dato;
                $.ajax
                    ({
                        data: params,
                        cache: true,
                        type: 'Post',
                        typeData: "json",
                        url: "GetDatosEmpresa",
                        success: function (data) {
                            console.log(data);
                            if (data.length > 0) {
                                var resEmpresa = data.split("|");
                                $('#rutCentro').val(resEmpresa[0]);
                                $('#razonSocialCentro').val(resEmpresa[1]);
                                $('#GiroCentro').val(resEmpresa[2]);
                                $('#DireccionCentro').val(resEmpresa[3]);
                                $('#ddlPaisCentro').val(resEmpresa[4]);
                                GetRegion(resEmpresa[4], 'Centro');
                                GetComuna(resEmpresa[5], 'Centro');
                                //$('#ddlRegion').val(resEmpresa[5]);
                                //$('#ddlComuna').val(resEmpresa[6]);
                                $('#TelefonoCentro').val(resEmpresa[7]);
                                $('#EmailCentro').val(resEmpresa[8]);
                                $('#RutContacto').val(resEmpresa[9]);
                                $('#NomContacto').val(resEmpresa[10]);

                                setTimeout(function () { $('#ddlPaisCentro option[value="' + resEmpresa[4].trim() + '"]').attr("selected", true); }, 300);
                                setTimeout(function () { $('#ddlRegionCentro option[value="' + resEmpresa[5].trim() + '"]').attr("selected", true); }, 500);
                                setTimeout(function () { $('#ddlComunaCentro option[value="' + resEmpresa[6].trim() + '"]').attr("selected", true); }, 500);
                            }

                        }
                    });
            }
            else {
                $('#rutCentro').val("");
                $('#razonSocialCentro').val("");
                $('#GiroCentro').val("");
                $('#DireccionCentro').val("");
                $('#ddlPaisCentro').val("");
                $('#ddlRegionCentro').val("");
                $('#ddlComunaCentro').val("");
                $('#TelefonoCentro').val("");
                $('#EmailCentro').val("");
                $('#RutContacto').val("");
                $('#NomContacto').val("");
            }
        }
        function Estado(dato) {
            var valor = dato;
            $('#estadoCentro').val(valor);
        }
    </script>
    <!-- VALIDA RUT-->
    <script>
        function checkRut(rut) {
            var valor = rut.value.replace('.', '');
            valor = valor.replace('-', '');
            cuerpo = valor.slice(0, -1);
            dv = valor.slice(-1).toUpperCase();
            rut.value = cuerpo + '-' + dv
            if (cuerpo.length < 7) { rut.setCustomValidity("RUT Incompleto"); return false; }
            suma = 0;
            multiplo = 2;

            for (i = 1; i <= cuerpo.length; i++) {
                index = multiplo * valor.charAt(cuerpo.length - i);
                suma = suma + index;
                if (multiplo < 7) { multiplo = multiplo + 1; } else { multiplo = 2; }
            }

            dvEsperado = 11 - (suma % 11);
            dv = (dv == 'K') ? 10 : dv;
            dv = (dv == 0) ? 11 : dv;
            if (dvEsperado != dv) { rut.setCustomValidity("RUT Inválido"); return false; }
            rut.setCustomValidity('');
        }
    </script>
    <script>
        var Fn = {
            validaRut: function (rutCompleto) {
                rutCompleto = rutCompleto.replace("‐", "-");
                if (!/^[0-9]+[-|‐]{1}[0-9kK]{1}$/.test(rutCompleto))
                    return false;
                var tmp = rutCompleto.split('-');
                var digv = tmp[1];
                var rut = tmp[0];
                if (digv == 'K') digv = 'k';

                return (Fn.dv(rut) == digv);
            },
            dv: function (T) {
                var M = 0, S = 1;
                for (; T; T = Math.floor(T / 10))
                    S = (S + T % 10 * (9 - M++ % 6)) % 11;
                return S ? S - 1 : 'k';
            }
        }


        $("#btnvalida").click(function () {
            if (Fn.validaRut($("#txt_rut").val())) {
                $("#msgerror").html("El rut ingresado es válido :D");
            } else {
                $("#msgerror").html("El Rut no es válido :'( ");
            }
        });
    </script>
    <!-- GUARDAR IMG-->
    

</body>

<script type="text/javascript" src="~/Content/bower_components/jquery/js/jquery.min.js"></script>
<script type="text/javascript" src="~/Content/bower_components/jquery-ui/js/jquery-ui.min.js"></script>
<script type="text/javascript" src="~/Content/bower_components/popper.js/js/popper.min.js"></script>
<script type="text/javascript" src="~/Content/bower_components/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="~/Content/bower_components/jquery-slimscroll/js/jquery.slimscroll.js"></script>
<script type="text/javascript" src="~/Content/bower_components/modernizr/js/modernizr.js"></script>
<script type="text/javascript" src="~/Content/bower_components/modernizr/js/css-scrollbars.js"></script>
<script type="text/javascript" src="~/Content/bower_components/pnotify/js/pnotify.js"></script>
<script type="text/javascript" src="~/Content/bower_components/pnotify/js/pnotify.desktop.js"></script>
<script type="text/javascript" src="~/Content/bower_components/pnotify/js/pnotify.buttons.js"></script>
<script type="text/javascript" src="~/Content/bower_components/pnotify/js/pnotify.confirm.js"></script>
<script type="text/javascript" src="~/Content/bower_components/pnotify/js/pnotify.callbacks.js"></script>
<script type="text/javascript" src="~/Content/bower_components/pnotify/js/pnotify.animate.js"></script>
<script type="text/javascript" src="~/Content/bower_components/pnotify/js/pnotify.history.js"></script>
<script type="text/javascript" src="~/Content/bower_components/pnotify/js/pnotify.mobile.js"></script>
<script type="text/javascript" src="~/Content/bower_components/pnotify/js/pnotify.nonblock.js"></script>
<script type="text/javascript" src="~/Content/assets/pages/pnotify/notify.js"></script>
<script type="text/javascript" src="~/Content/assets/js/script.js"></script>







<script>
    $('#file-fr').fileinput({
        theme: 'fas',
        language: 'fr',
        uploadUrl: '#',
        allowedFileExtensions: ['jpg', 'png', 'gif']
    });
    $('#file-es').fileinput({
        theme: 'fas',
        language: 'es',
        uploadUrl: '#',
        allowedFileExtensions: ['jpg', 'png', 'gif']
    });
    $("#file-0").fileinput({
        theme: 'fas',
        uploadUrl: '#'
    }).on('filepreupload', function (event, data, previewId, index) {
        alert('The description entered is:\n\n' + ($('#description').val() || ' NULL'));
    });
    $("#file-1").fileinput({
        theme: 'fas',
        uploadUrl: '#', // you must set a valid URL here else you will get an error
        allowedFileExtensions: ['jpg', 'png', 'gif'],
        overwriteInitial: false,
        maxFileSize: 1000,
        maxFilesNum: 10,
        //allowedFileTypes: ['image', 'video', 'flash'],
        slugCallback: function (filename) {
            return filename.replace('(', '_').replace(']', '_');
        }
    });
    /*
     $(".file").on('fileselect', function(event, n, l) {
     alert('File Selected. Name: ' + l + ', Num: ' + n);
     });
     */
    $("#file-3").fileinput({
        theme: 'fas',
        showUpload: false,
        showCaption: false,
        browseClass: "btn btn-primary btn-lg",
        fileType: "any",
        previewFileIcon: "<i class='glyphicon glyphicon-king'></i>",
        overwriteInitial: false,
        initialPreviewAsData: true,
        initialPreview: [
            "http://lorempixel.com/1920/1080/transport/1",
            "http://lorempixel.com/1920/1080/transport/2",
            "http://lorempixel.com/1920/1080/transport/3"
        ],
        initialPreviewConfig: [
            { caption: "transport-1.jpg", size: 329892, width: "120px", url: "{$url}", key: 1 },
            { caption: "transport-2.jpg", size: 872378, width: "120px", url: "{$url}", key: 2 },
            { caption: "transport-3.jpg", size: 632762, width: "120px", url: "{$url}", key: 3 }
        ]
    });
    $("#file-4").fileinput({
        theme: 'fas',
        uploadExtraData: { kvId: '10' }
    });
    $(".btn-warning").on('click', function () {
        var $el = $("#file-4");
        if ($el.attr('disabled')) {
            $el.fileinput('enable');
        } else {
            $el.fileinput('disable');
        }
    });
    $(".btn-info").on('click', function () {
        $("#file-4").fileinput('refresh', { previewClass: 'bg-info' });
    });

    $(document).ready(function () {
        $("#test-upload").fileinput({
            'theme': 'fas',
            'showPreview': false,
            'allowedFileExtensions': ['jpg', 'png', 'gif'],
            'elErrorContainer': '#errorBlock'
        });
        $("#kv-explorer").fileinput({
            'theme': 'explorer-fas',
            'uploadUrl': '#',
            overwriteInitial: false,
            initialPreviewAsData: true,
            initialPreview: [
                "http://lorempixel.com/1920/1080/nature/1",
                "http://lorempixel.com/1920/1080/nature/2",
                "http://lorempixel.com/1920/1080/nature/3"
            ],
            initialPreviewConfig: [
                { caption: "nature-1.jpg", size: 329892, width: "120px", url: "{$url}", key: 1 },
                { caption: "nature-2.jpg", size: 872378, width: "120px", url: "{$url}", key: 2 },
                { caption: "nature-3.jpg", size: 632762, width: "120px", url: "{$url}", key: 3 }
            ]
        });
        /*
         $("#test-upload").on('fileloaded', function(event, file, previewId, index) {
         alert('i = ' + index + ', id = ' + previewId + ', file = ' + file.name);
         });
         */
    });
</script>
<script src="~/Content/Ultima/js/plugins/piexif.js" type="text/javascript"></script>
<script src="~/Content/Ultima/js/plugins/sortable.js" type="text/javascript"></script>
<script src="~/Content/Ultima/js/fileinput.js" type="text/javascript"></script>
<script src="~/Content/Ultima/js/locales/fr.js" type="text/javascript"></script>
<script src="~/Content/Ultima/js/locales/es.js" type="text/javascript"></script>
<script src="~/Content/Ultima/themes/fas/theme.js" type="text/javascript"></script>
<script src="~/Content/Ultima/themes/explorer-fas/theme.js" type="text/javascript"></script>